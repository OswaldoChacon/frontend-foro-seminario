<mat-table [dataSource]="dataSource">
    <ng-container [matColumnDef]="column" *ngFor="let column of objectKeys(columnsHeader)">
        <!-- column === 'acciones' ? 'end center':'center center' -->
        <mat-header-cell *matHeaderCellDef fxShow [fxHide.xs]="!(column === 'acciones')" [ngClass]="{'align-right': column==='acciones'}" >
             <!-- fxLayoutAlign.xs="end center" -->
            <div *ngIf="column === 'acciones'; else columnString">
                <button mat-icon-button aria-label="Agregar nuevo registro" title="Agregar nuevo registro"
                    (click)="agregarRegistro()">
                    <mat-icon>add</mat-icon>
                </button>
            </div>
            <ng-template #columnString>
                {{columnsHeader[column]}}
            </ng-template>
        </mat-header-cell>
        <mat-cell *matCellDef="let data" [ngClass]="{'align-right': column==='acciones'}">
            <span class="mobile-label">{{columnsHeader[column]}}</span>
            <ng-container [ngSwitch]="column">
                <ng-container *ngSwitchCase="'acciones'">
                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu with button" (click)="$event.stopPropagation()">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="emitirData(data,'Eliminar')">
                            <mat-icon>delete</mat-icon>
                            <span>Eliminar</span>
                        </button>
                        <button mat-menu-item [matMenuTriggerFor]="menuRoles" aria-label="Menu with button" (click)="$event.stopPropagation()">
                            <mat-icon>group</mat-icon>
                            <span>Agregar rol</span>
                        </button>
                        <mat-menu #menuRoles="matMenu" xPosition="before">
                            <mat-checkbox class="mat-menu-item" (change)="emitirData(data,$event,rol.nombre)" [checked]="rol.is" *ngFor="let rol of data.roles" (click)="$event.stopPropagation()">{{rol.nombre}}</mat-checkbox>
                        </mat-menu>
                    </mat-menu>                    
                </ng-container>
                <ng-container *ngSwitchCase="'acceso'">
                    <mat-icon class="icon-check"
                        [ngClass]="{'verificado': data[column] == 1,'error':data[column] == 0}">
                        {{data[column] == 1 ? 'verified_user':'error'}}</mat-icon>
                </ng-container>

                <ng-container *ngSwitchDefault>
                    <span class="text-content">{{data[column]}}</span>
                </ng-container>
            </ng-container>         
        </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="objectKeys(columnsHeader)"></mat-header-row>
    <mat-row *matRowDef="let data; columns: objectKeys(columnsHeader);" (click)="editarRegistro(data)"></mat-row>
</mat-table>
<div *ngIf="!(dataSource.loading$  | async) && !dataSource.total" class="center-message">
    No se ha encontrado ningÃºn registro
</div>
<mat-spinner *ngIf="dataSource.loading$ | async" diameter="50" class="table-loading"></mat-spinner>